#: import ScreenManager kivy.uix.screenmanager.ScreenManager
#: import Screen kivy.uix.screenmanager.ScreenManager
WindowManager:
  name: 'windowmanager'
  MainPage:
    name: 'mainpage'
  HistoryItemScreen:
    name: 'historyitem'

<MainPage>
  name: 'mainpage'

  MDBoxLayout:
    orientation: 'vertical'

    MDTopAppBar:
      title: "Foodie"

    MDBottomNavigation:
      # color stuff
      specific_text_color: 1, 1, 1, 1
      md_bg_color: .2, .2, .2, 1

      MDBottomNavigationItem:
        name: "Map"
        text: 'Map'
        icon: 'map'
        on_tab_release: app.root.current_screen.map_load()

        ##############################
        # Map screen
        ##############################

        MDScreen:
          FloatLayout:
            orientation: 'vertical'
            spacing: 10
            MDFloatingActionButton:
              icon: "android"
              md_bg_color: app.theme_cls.primary_color
              pos_hint: {'x': 0.5, 'y': 0.5}
            MapView:
              id: main_map
              double_tap_zoom: True
              # size: min(root.height, root.width), min(root.height, root.width)
              size: 100, 100
              on_lat: print('lat:', self.lat)
              on_lon: print('lon:', self.lon)
              lon: 103.76313504803471
              lat: 1.3784949677817633
              zoom: 19

              # MapMarkerPopup:
              #   lon: 103.76313504803471
              #   lat: 1.3784949677817633
              #   MDRoundFlatButton:
              #     text: "Hillion mall"
              #     text_color: 1, 1, 1, 1
              #     md_bg_color: app.theme_cls.primary_color

      MDBottomNavigationItem:
        name: "Screen 2"
        text: 'Add location'
        icon: 'map-marker-plus'
        ##############################
        # Add-location screen
        ##############################
        MDScreen:
          MDLabel:
            text: "this is the Add location screen i think"
            halign: "center"

      MDBottomNavigationItem:
        name: "History"
        text: 'History'
        icon: 'history'
        ##############################
        # History screen
        ##############################
        MDScreen:
          BoxLayout:
            orientation: 'vertical'
            spacing: 10

            TwoLineAvatarIconListItem:
              text: "Restaurant name"
              secondary_text: "28 Dec 2022"
              on_release:  app.root.current = "historyitem"

              IconRightWidget:
                icon: "chevron-right"

            MDLabel:
              text: "this is the History screen i think"
              halign: "center"

      MDBottomNavigationItem:
        name: "Profile"
        text: 'Profile'
        icon: 'account-circle'
        ##############################
        # Profile screen
        ##############################
        MDScreen:
          BoxLayout:
            orientation: 'vertical'
            spacing: 10
            padding: 100

            MDTextField:
              id: UsernameInput
              hint_text: "Username"
              mode: "rectangle"
              text: "Example Username"

            MDTextField:
              id: DescriptionInput
              hint_text: "Description"
              multiline: True
              text: "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi eget lorem efficitur, fermentum risus vel, fringilla ex. Cras interdum ullamcorper blandit"
              mode: "rectangle"

            MDLabel:
              text: "this is the profile screen i think"
              halign: "center"




<HistoryItemScreen>
  name: 'historyitem'
  MDBoxLayout:
    orientation: 'vertical'

    MDTopAppBar:
      title: "Foodie"
      left_action_items: [['arrow-left', lambda x: app.back_homepage()]]
    MDLabel:
      text: "this is the historyitem screen i think"
      halign: "center"